<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Go WASM Example with TinyGo</title>
</head>
<body>
    <h1>Go WASM Example with TinyGo</h1>
    <button id="wasmButton" disabled>Loading...</button>

    <script>
        let wasmInstance;

        async function initWasm() {
            try {
                const response = await fetch('main.wasm');
                const buffer = await response.arrayBuffer();
                const results = await WebAssembly.instantiate(buffer, {
                    env: {
                        // Provide any necessary imports here
                    }
                });
                wasmInstance = results.instance;
                console.log('WASM module instantiated');

                // Enable the button and update its text
                const button = document.getElementById('wasmButton');
                button.disabled = false;
                button.textContent = 'Call WASM Function';

                // Add the event listener to the button
                button.addEventListener('click', () => {
                    if (wasmInstance && wasmInstance.exports.hello) {
                        wasmInstance.exports.hello();
                    } else {
                        console.error('WASM function "hello" is not available.');
                    }
                });
            } catch (err) {
                console.error('Error instantiating WASM module:', err);
            }
        }

        initWasm();
    </script>
</body>
</html>
